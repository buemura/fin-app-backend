generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native"]
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id                String     @id @default(uuid())
  name              String
  email             String     @unique
  password          String?
  isExternal        Boolean
  externalId        String?    @map("external_id")
  imageUrl          String?    @map("image_url")

  createdAt         DateTime   @map("created_at") @default(now())
  updatedAt         DateTime   @map("updated_at") @updatedAt
  expense           Expense[]
  account           Account[]
  // transaction       Transaction[]

  @@map("user")
}

model Expense {
  id                String              @id @default(uuid())
  user              User                @relation(fields: [userId], references: [id])
  userId            String              @map("user_id")
  title             String
  imageUrl          String?             @map("image_url")
  isPaid            Boolean             @map("is_paid")
  isActive          Boolean             @map("is_active")
  createdAt         DateTime            @default(now()) @map("created_at")
  updatedAt         DateTime            @updatedAt @map("updated_at")

  @@map("expense")
  @@index(userId)
}

model Account {
  id                String              @id @default(uuid())
  user              User                @relation(fields: [userId], references: [id])
  userId            String              @map("user_id")
  name              String
  balance           Float               @default(0)
  icon              String?
  createdAt         DateTime            @default(now()) @map("created_at")
  updatedAt         DateTime            @updatedAt @map("updated_at")

  @@map("account")
  @@index(userId)
}

// model Transaction {
//   id                      String                @id @default(uuid())
//   user                    User                  @relation(fields: [userId], references: [id])
//   userId                  String                @map("user_id")
//   title                   String            
//   associatedTo            String                @map("associated_to")           
//   category                String            
//   amount                  Decimal            
//   paymentDate             DateTime              @map("payment_date")
//   paymentMethod           String                @map("payment_method")
//   createdAt               DateTime              @default(now()) @map("created_at")
//   updatedAt               DateTime              @updatedAt @map("updated_at")

//   @@map("transaction")
// }